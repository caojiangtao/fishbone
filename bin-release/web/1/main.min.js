var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Bone=function(e){function t(){var t=e.call(this)||this;return t.fish_color=common.fishColor,t.fish_line=3,t.fish_fontfamily="微软雅黑",t.fish_split=common.fish_split,t.fish_txt_split=[],t.fish_txt_split2=[],t.zhishidian=0,t.dalei=0,t.listH=[],t.listB=[],t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){var t=(common.viewWidth,common.viewHeight),i=new egret.Shape;i.graphics.lineStyle(this.fish_line,this.fish_color),i.graphics.moveTo(20,t/2),i.graphics.curveTo(100,t/2-50,160,t/2-50),i.graphics.moveTo(20,t/2),i.graphics.curveTo(100,t/2+50,160,t/2+40),i.graphics.moveTo(160,t/2-50),i.graphics.lineTo(160,t/2+40),i.graphics.endFill(),this.addChild(i);var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(common.jsonUrl,egret.HttpMethod.GET),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(),o.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),o.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},t.prototype.onGetComplete=function(e){var t=e.currentTarget,i=JSON.parse(t.response),o=(common.viewWidth,common.viewHeight);this.dalei=i.list.length,common.dalei=i.list.length;var s=new egret.TextField;s.size=13,s.text=i.name,this.addChild(s),s.textColor=common.fishTitleColor,s.x=46,s.y=o/2-10;for(var n=0;n<i.list.length;n++){if(this.zhishidian+=i.list[n].lesson.length,common.zhishidian+=i.list[n].lesson.length,n%2==0){var h=i.list[n].lesson.length,r=i.list[n].name,l=common.textColor[i.list[n].level-1];this.Tree=new Tree(n,h,-80,r,l),this.addChild(this.Tree),this.Tree.y=o/2,common.allTree.push(this.Tree);var a=[];this.listH.push(i.list[n].lesson.length);for(var h=0;h<i.list[n].lesson.length;h++){var c=i.list[n].lesson[h].level-1;this.Tree.drawLine(i.list[n].lesson[h].title,h,i.list[n].lesson[h].url,common.textColor[c]);var d=this.len(i.list[n].lesson[h].title);a.push(d)}a.sort(function(e,t){return e-t});var g=a[a.length-1];10>g&&(g=10),this.fish_txt_split.push(g),0==n?this.Tree.x=246:this.Tree.x=common.allTree[n/2-1].x+10*this.fish_txt_split[n/2-1]}else{var l=common.textColor[i.list[n].level-1],h=i.list[n].lesson.length,r=i.list[n].name;i.list[n].url;this.Tree=new Tree(n,h,80,r,l),this.addChild(this.Tree),this.Tree.y=o/2,common.allTree2.push(this.Tree);var p=[];this.listB.push(i.list[n].lesson.length);for(var h=0;h<i.list[n].lesson.length;h++){var c=i.list[n].lesson[h].level-1;this.Tree.drawLine(i.list[n].lesson[h].title,h,i.list[n].lesson[h].url,common.textColor[c]);var d=this.len(i.list[n].lesson[h].title);p.push(d)}1==n?this.Tree.x=230:this.Tree.x=common.allTree2[(n+1)/2-2].x+10*this.fish_txt_split2[(n+1)/2-2],p.sort(function(e,t){return e-t});var m=p[p.length-1];10>m&&(m=10),this.fish_txt_split2.push(m)}if(this.listH.sort(function(e,t){return e-t}),this.listB.sort(function(e,t){return e-t}),this.fishHeight=30*this.listH[this.listH.length-1]+30*this.listB[this.listB.length-1],this.touchEnabled=!0,this.height=this.fishHeight+300,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(){var e=egret.Tween.get(this);e.to({y:30*this.listH[this.listH.length-1]},500)},this),n==i.list.length-1){if(void 0==common.allTree2[common.allTree2.length-1])return this.fishLength=230,this.darwfish(),!1;common.allTree2[common.allTree2.length-1].x>common.allTree[common.allTree.length-1].x?this.fishLength=common.allTree2[common.allTree2.length-1].x||230:this.fishLength=common.allTree[common.allTree.length-1].x||230,this.darwfish()}}},t.prototype.darwfish=function(){var e;e=this.fishHeight>common.viewHeight?-(this.fishHeight-common.viewHeight)/2:0;var t=(30*this.listH[this.listH.length-1],new egret.Shape);t.graphics.beginFill(common.bcColor,1),t.graphics.drawRect(0,0,this.fishLength,this.fishHeight),t.graphics.endFill(),t.x=0,t.alpha=0,t.y=e,this.addChildAt(t,0);var i=new egret.Shape;i.graphics.beginFill(this.fish_color,this.fish_line),i.graphics.drawRect(160,common.viewHeight/2-5,this.fishLength,5),i.graphics.endFill(),this.addChild(i);var o=new egret.Shape;o.graphics.lineStyle(this.fish_line,this.fish_color),o.graphics.moveTo(this.fishLength+160,common.viewHeight/2-5),o.graphics.lineTo(this.fishLength+200,common.viewHeight/2-36),o.graphics.lineTo(this.fishLength+180,common.viewHeight/2-3),o.graphics.lineTo(this.fishLength+200,common.viewHeight/2+21),o.graphics.lineTo(this.fishLength+160,common.viewHeight/2),this.addChild(o)},t.prototype.len=function(e){for(var t=0,i=0;i<e.length;i++)e.charCodeAt(i)>127||94==e.charCodeAt(i)?t+=2:t++;return t},t.prototype.onGetIOError=function(e){console.log("get error : "+e)},t.prototype.onGetProgress=function(e){console.log("get progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t}(egret.DisplayObjectContainer);__reflect(Bone.prototype,"Bone");var common;!function(e){function t(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t}e.jsonUrl="/zhiye/api/fish?slug="+$("#slug").data("slug"),e.textlist=["入门知识点","进阶知识点","深入知识点","不授课知识点"],e.textColor=["0x11c780","0x109ac0","0x9c76ff","0xff9f14","0xdf5142"],e.viewWidth=770,e.viewHeight=400,e.fishColor=7593215,e.fishTitleColor=65280,e.bcColor=4210752,e.fish_split=90,e.allTree=[],e.allTree2=[],e.zhishidian=0,e.dalei=0,e.createBitmapByName=t}(common||(common={}));var Main=function(e){function t(){var t=e.call(this)||this;return t.textlist=common.textlist,t.textColor=common.textColor,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup("preload")},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this.createGameScene())},t.prototype.createGameScene=function(){common.viewWidth,common.viewHeight;common.fish=new Bone;var e=new egret.ScrollView;e.setContent(common.fish),e.width=common.viewWidth,e.height=common.viewHeight,e.x=0,e.y=0,e.bounces=!1,e.anchorOffsetX=0,e.anchorOffsetY=0,e.verticalScrollPolicy="auto",e.horizontalScrollPolicy="auto";var t=common.createBitmapByName("bg_jpg");t.x=0,t.y=0,t.width=common.viewWidth,t.height=common.viewHeight,this.addChild(t);var i=new egret.TextField;i.size=12,setTimeout(function(){i.text="*本职业包含"+common.dalei+"个大类"+common.zhishidian+"个小类(持续完善...)"},1e3),i.textColor=9476514,i.background=!0,i.backgroundColor=9025,i.height=14,i.textAlign=egret.HorizontalAlign.CENTER,i.x=300,i.y=370,this.addChild(e),this.addChild(i)},t.prototype.onTouchTap=function(e){},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var Tree=function(e){function t(t,i,o,s,n){var h=e.call(this)||this;return h.fish_color=common.fishColor,h.fish_line=1,h.fish_fontfamily="微软雅黑",h._visible=!0,h.sprcon=new egret.Sprite,h._height=i,h._width=t,h._rotation=o,h._name=s,h._color=n,h.addEventListener(egret.Event.ADDED_TO_STAGE,h.onAddToStage,h),h}return __extends(t,e),t.prototype.onAddToStage=function(e){var t=new egret.Shape;t.graphics.lineStyle(this.fish_line,this.fish_color),t.graphics.moveTo(0,0),t.graphics.lineTo(30*this._height,0),t.rotation=this._rotation,t.graphics.endFill(),this.addChild(t);var i=new egret.TextField;i.size=13,i.textColor=common.fishColor,i.text=this._name,this.addChild(i),this._width%2==0?(i.x=-15,i.y=-30):(i.x=-5,i.y=30),i.rotation=this._rotation;var o=new egret.Shape;o.graphics.beginFill(7593215,1),o.graphics.drawCircle(0,0,4),o.graphics.endFill(),this.addChild(o),this._width%2==0?(o.y=-20,o.x=-10):(o.y=20,o.x=-15),o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.onTouch=function(e){if(this._width%2==0)var t=common.allTree[this._width/2+1];else var t=common.allTree2[(this._width-1)/2+1];if(0==this.sprcon.visible){if(this.sprcon.visible=!0,void 0==t)return!1;t.x=t.x+70}else{if(this.sprcon.visible=!1,void 0==t)return!1;t.x=t.x-70}},t.prototype.len=function(e){for(var t=0,i=0;i<e.length;i++)e.charCodeAt(i)>127||94==e.charCodeAt(i)?t+=2:t++;return t},t.prototype.drawLine=function(e,t,i,o){var s=this.len(e);this.shp3=new egret.Shape,this.shp3.graphics.lineStyle(this.fish_line,this.fish_color),this.shp3.graphics.moveTo(0,0),this.shp3.graphics.lineTo(7*s,0),this.shp3.graphics.endFill(),this.sprcon.addChild(this.shp3),this.tx=new egret.TextField,this.tx.textFlow=new Array({text:e,style:{href:i}}),this.tx.visible=this._visible,this.tx.size=12;var n=o||16777215;this.tx.textColor=n,this.tx.touchEnabled=!0,this.sprcon.addChild(this.tx),this.addChild(this.sprcon),this._width%2==0?(this.shp3.x=6+5*t,this.shp3.y=-27+-30*t,this.tx.x=15+5*t,this.tx.y=-42+-30*t):(this.shp3.x=7+5*t,this.shp3.y=28+30*t,this.tx.x=15+5*t,this.tx.y=15+30*t)},t}(egret.Sprite);__reflect(Tree.prototype,"Tree");var Type=function(e){function t(t,i){var o=e.call(this)||this,s=new egret.TextField;return o.addChild(s),s.text=i,s.size=12,s.textColor=t,s.border=!0,s.borderColor=t,s.width=80,s.height=20,s.background=0,s.textAlign=egret.HorizontalAlign.CENTER,s.verticalAlign=egret.VerticalAlign.MIDDLE,o}return __extends(t,e),t}(egret.Sprite);__reflect(Type.prototype,"Type");